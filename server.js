!function(e){var t={};function r(o){if(t[o])return t[o].exports;var n=t[o]={i:o,l:!1,exports:{}};return e[o].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)r.d(o,n,function(t){return e[t]}.bind(null,n));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=24)}([function(e,t){e.exports=require("react")},function(e,t){e.exports=require("express")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("react-dom/server")},function(e,t){e.exports=require("react-redux")},function(e,t){e.exports=require("redux-thunk")},function(e,t){e.exports=require("url")},function(e,t,r){var o=r(16).convert,n=r(20),i=r(10).PassThrough,s=r(11);function a(e,t){t=t||{},this.body=e,this.bodyUsed=!1,this.size=t.size||0,this.timeout=t.timeout||0,this._raw=[],this._abort=!1}e.exports=a,a.prototype.json=function(){var e=this;return this._decode().then((function(t){try{return JSON.parse(t.toString())}catch(t){return a.Promise.reject(new s("invalid json response body at "+e.url+" reason: "+t.message,"invalid-json"))}}))},a.prototype.text=function(){return this._decode().then((function(e){return e.toString()}))},a.prototype.buffer=function(){return this._decode()},a.prototype._decode=function(){var e=this;return this.bodyUsed?a.Promise.reject(new Error("body used already for: "+this.url)):(this.bodyUsed=!0,this._bytes=0,this._abort=!1,this._raw=[],new a.Promise((function(t,r){var o;return"string"==typeof e.body?(e._bytes=e.body.length,e._raw=[new Buffer(e.body)],t(e._convert())):e.body instanceof Buffer?(e._bytes=e.body.length,e._raw=[e.body],t(e._convert())):(e.timeout&&(o=setTimeout((function(){e._abort=!0,r(new s("response timeout at "+e.url+" over limit: "+e.timeout,"body-timeout"))}),e.timeout)),e.body.on("error",(function(t){r(new s("invalid response body at: "+e.url+" reason: "+t.message,"system",t))})),e.body.on("data",(function(t){if(!e._abort&&null!==t){if(e.size&&e._bytes+t.length>e.size)return e._abort=!0,void r(new s("content size at "+e.url+" over limit: "+e.size,"max-size"));e._bytes+=t.length,e._raw.push(t)}})),void e.body.on("end",(function(){e._abort||(clearTimeout(o),t(e._convert()))})))})))},a.prototype._convert=function(e){e=e||"utf-8";var t,r,n=this.headers.get("content-type"),i="utf-8";if(n){if(!/text\/html|text\/plain|\+xml|\/xml/i.test(n))return Buffer.concat(this._raw);t=/charset=([^;]*)/i.exec(n)}if(!t&&this._raw.length>0){for(var s=0;s<this._raw.length&&!((r+=this._raw[s].toString()).length>1024);s++);r=r.substr(0,1024)}return!t&&r&&(t=/<meta.+?charset=(['"])(.+?)\1/i.exec(r)),!t&&r&&(t=/<meta[\s]+?http-equiv=(['"])content-type\1[\s]+?content=(['"])(.+?)\2/i.exec(r))&&(t=/charset=(.*)/i.exec(t.pop())),!t&&r&&(t=/<\?xml.+?encoding=(['"])(.+?)\1/i.exec(r)),t&&("gb2312"!==(i=t.pop())&&"gbk"!==i||(i="gb18030")),o(Buffer.concat(this._raw),e,i)},a.prototype._clone=function(e){var t,r,o=e.body;if(e.bodyUsed)throw new Error("cannot clone body after it is used");return n(o)&&"function"!=typeof o.getBoundary&&(t=new i,r=new i,o.pipe(t),o.pipe(r),e.body=t,o=r),o},a.Promise=global.Promise},function(e,t){function r(e){var t=this;for(var o in this._headers={},e instanceof r&&(e=e.raw()),e)e.hasOwnProperty(o)&&("string"==typeof e[o]?this.set(o,e[o]):"number"!=typeof e[o]||isNaN(e[o])?Array.isArray(e[o])&&e[o].forEach((function(e){t.append(o,e.toString())})):this.set(o,e[o].toString()))}e.exports=r,r.prototype.get=function(e){var t=this._headers[e.toLowerCase()];return t?t[0]:null},r.prototype.getAll=function(e){return this.has(e)?this._headers[e.toLowerCase()]:[]},r.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this._headers).forEach((function(r){this._headers[r].forEach((function(o){e.call(t,o,r,this)}),this)}),this)},r.prototype.set=function(e,t){this._headers[e.toLowerCase()]=[t]},r.prototype.append=function(e,t){this.has(e)?this._headers[e.toLowerCase()].push(t):this.set(e,t)},r.prototype.has=function(e){return this._headers.hasOwnProperty(e.toLowerCase())},r.prototype.delete=function(e){delete this._headers[e.toLowerCase()]},r.prototype.raw=function(){return this._headers}},function(e,t){e.exports=require("http")},function(e,t){e.exports=require("stream")},function(e,t,r){function o(e,t,r){this.name=this.constructor.name,this.message=e,this.type=t,r&&(this.code=this.errno=r.code),Error.captureStackTrace(this,this.constructor)}e.exports=o,r(21).inherits(o,Error)},function(e,t,r){"use strict";var o=r(13);e.exports=function(e,t){return/^\/\//.test(e)&&(e="https:"+e),o.call(this,e,t)},global.fetch||(global.fetch=e.exports,global.Response=o.Response,global.Headers=o.Headers,global.Request=o.Request)},function(e,t,r){r(6).parse;var o=r(6).resolve,n=r(9),i=r(14),s=r(15),a=r(10),c=r(7),u=r(22),h=r(8),d=r(23),l=r(11);function p(e,t){if(!(this instanceof p))return new p(e,t);if(!p.Promise)throw new Error("native promise missing, set Fetch.Promise to your favorite alternative");c.Promise=p.Promise;var r=this;return new p.Promise((function(c,f){var y,b=new d(e,t);if(!b.protocol||!b.hostname)throw new Error("only absolute urls are supported");if("http:"!==b.protocol&&"https:"!==b.protocol)throw new Error("only http(s) protocols are supported");y="https:"===b.protocol?i.request:n.request;var m=new h(b.headers);b.compress&&m.set("accept-encoding","gzip,deflate"),m.has("user-agent")||m.set("user-agent","node-fetch/1.0 (+https://github.com/bitinn/node-fetch)"),m.has("connection")||b.agent||m.set("connection","close"),m.has("accept")||m.set("accept","*/*"),!m.has("content-type")&&b.body&&"function"==typeof b.body.getBoundary&&m.set("content-type","multipart/form-data; boundary="+b.body.getBoundary()),!m.has("content-length")&&/post|put|patch|delete/i.test(b.method)&&("string"==typeof b.body?m.set("content-length",Buffer.byteLength(b.body)):b.body&&"function"==typeof b.body.getLengthSync?b.body._lengthRetrievers&&0==b.body._lengthRetrievers.length?m.set("content-length",b.body.getLengthSync().toString()):b.body.hasKnownLength&&b.body.hasKnownLength()&&m.set("content-length",b.body.getLengthSync().toString()):void 0!==b.body&&null!==b.body||m.set("content-length","0")),b.headers=m.raw(),b.headers.host&&(b.headers.host=b.headers.host[0]);var g,v=y(b);b.timeout&&v.once("socket",(function(e){g=setTimeout((function(){v.abort(),f(new l("network timeout at: "+b.url,"request-timeout"))}),b.timeout)})),v.on("error",(function(e){clearTimeout(g),f(new l("request to "+b.url+" failed, reason: "+e.message,"system",e))})),v.on("response",(function(e){if(clearTimeout(g),r.isRedirect(e.statusCode)&&"manual"!==b.redirect)return"error"===b.redirect?void f(new l("redirect mode is set to error: "+b.url,"no-redirect")):b.counter>=b.follow?void f(new l("maximum redirect reached at: "+b.url,"max-redirect")):e.headers.location?(303!==e.statusCode&&(301!==e.statusCode&&302!==e.statusCode||"POST"!==b.method)||(b.method="GET",delete b.body,delete b.headers["content-length"]),b.counter++,void c(p(o(b.url,e.headers.location),b))):void f(new l("redirect location header missing at: "+b.url,"invalid-redirect"));var t=new h(e.headers);"manual"===b.redirect&&t.has("location")&&t.set("location",o(b.url,t.get("location")));var n,i=e.pipe(new a.PassThrough),d={url:b.url,status:e.statusCode,statusText:e.statusMessage,headers:t,size:b.size,timeout:b.timeout};if(!b.compress||"HEAD"===b.method||!t.has("content-encoding")||204===e.statusCode||304===e.statusCode)return n=new u(i,d),void c(n);var y=t.get("content-encoding");if("gzip"==y||"x-gzip"==y)return i=i.pipe(s.createGunzip()),n=new u(i,d),void c(n);"deflate"!=y&&"x-deflate"!=y?(n=new u(i,d),c(n)):e.pipe(new a.PassThrough).once("data",(function(e){i=8==(15&e[0])?i.pipe(s.createInflate()):i.pipe(s.createInflateRaw()),n=new u(i,d),c(n)}))})),"string"==typeof b.body?(v.write(b.body),v.end()):b.body instanceof Buffer?(v.write(b.body),v.end()):"object"==typeof b.body&&b.body.pipe?b.body.pipe(v):"object"==typeof b.body?(v.write(b.body.toString()),v.end()):v.end()}))}e.exports=p,e.exports.default=e.exports,p.prototype.isRedirect=function(e){return 301===e||302===e||303===e||307===e||308===e},p.Promise=global.Promise,p.Response=u,p.Headers=h,p.Request=d},function(e,t){e.exports=require("https")},function(e,t){e.exports=require("zlib")},function(e,t,r){"use strict";var o=r(17),n=r(18);function i(e,t,r){return"UTF-8"===t?o.decode(e,r):"UTF-8"===r?o.encode(e,t):o.encode(o.decode(e,r),t)}function s(e){return(e||"").toString().trim().replace(/^latin[\-_]?(\d+)$/i,"ISO-8859-$1").replace(/^win(?:dows)?[\-_]?(\d+)$/i,"WINDOWS-$1").replace(/^utf[\-_]?(\d+)$/i,"UTF-$1").replace(/^ks_c_5601\-1987$/i,"CP949").replace(/^us[\-_]?ascii$/i,"ASCII").toUpperCase()}e.exports.convert=function(e,t,r,o){var a;r=s(r||"UTF-8"),t=s(t||"UTF-8"),e=e||"","UTF-8"!==r&&"string"==typeof e&&(e=new Buffer(e,"binary"));if(r===t)a="string"==typeof e?new Buffer(e):e;else if(n&&!o)try{a=function(e,t,r){var o,i;return i=new n(r,t+"//TRANSLIT//IGNORE"),(o=i.convert(e)).slice(0,o.length)}(e,t,r)}catch(o){console.error(o);try{a=i(e,t,r)}catch(t){console.error(t),a=e}}else try{a=i(e,t,r)}catch(t){console.error(t),a=e}"string"==typeof a&&(a=new Buffer(a,"utf-8"));return a}},function(e,t){e.exports=require("iconv-lite")},function(e,t,r){"use strict";var o;try{"iconv",o=r(19)("iconv").Iconv}catch(e){}e.exports=o},function(e,t){function r(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}r.keys=function(){return[]},r.resolve=r,e.exports=r,r.id=19},function(e,t){e.exports=require("is-stream")},function(e,t){e.exports=require("util")},function(e,t,r){var o=r(9),n=r(8),i=r(7);function s(e,t){t=t||{},this.url=t.url,this.status=t.status||200,this.statusText=t.statusText||o.STATUS_CODES[this.status],this.headers=new n(t.headers),this.ok=this.status>=200&&this.status<300,i.call(this,e,t)}e.exports=s,s.prototype=Object.create(i.prototype),s.prototype.clone=function(){return new s(this._clone(this),{url:this.url,status:this.status,statusText:this.statusText,headers:this.headers,ok:this.ok})}},function(e,t,r){var o=r(6).parse,n=r(8),i=r(7);function s(e,t){var r,a;e instanceof s?(r=e.url,a=o(r)):(a=o(r=e),e={}),t=t||{},this.method=t.method||e.method||"GET",this.redirect=t.redirect||e.redirect||"follow",this.headers=new n(t.headers||e.headers||{}),this.url=r,this.follow=void 0!==t.follow?t.follow:void 0!==e.follow?e.follow:20,this.compress=void 0!==t.compress?t.compress:void 0===e.compress||e.compress,this.counter=t.counter||e.counter||0,this.agent=t.agent||e.agent,i.call(this,t.body||this._clone(e),{timeout:t.timeout||e.timeout||0,size:t.size||e.size||0}),this.protocol=a.protocol,this.hostname=a.hostname,this.port=a.port,this.path=a.path,this.auth=a.auth}e.exports=s,s.prototype=Object.create(i.prototype),s.prototype.clone=function(){return new s(this)}},function(e,t,r){"use strict";r.r(t);var o=r(1),n=r.n(o),i=r(0),s=r.n(i),a=r(3),c=r(4),u=r(2),h=r(5),d=r.n(h);var l=function(e){return e};var p=Object(c.connect)((function(e){return{list:e.list}}))((function(e){var t=e.list;return s.a.createElement("div",null,s.a.createElement("h1",null,"Echo JS"),s.a.createElement("ul",null,t.map((function(e){return s.a.createElement("li",{key:e.id},s.a.createElement("a",{href:e.url},e.title))}))))})),f=r(12),y=r.n(f),b=n()();b.use(n.a.static("public")),b.listen(process.env.PORT||3e3),b.get("/",(function(e,t){(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"echojs",t="https://top-api.lokibai.com?target=".concat(e);return y()(t).then((function(e){return e.json()}))})().then((function(e){!function(e,t){var r=function(e){return Object(u.createStore)(l,e,Object(u.applyMiddleware)(d.a))}(e),o=r.getState(),n=Object(a.renderToString)(s.a.createElement(c.Provider,{store:r},s.a.createElement(p,null)));t('\n      <!DOCTYPE html>\n      <html>\n        <head>\n          <title>SSR with RR</title>\n          <script src="/bundle.js" defer><\/script>\n          <script>window.__STATE__ = '.concat(JSON.stringify(o),'<\/script>\n        </head>\n\n        <body>\n          <div id="app">').concat(n,"</div>\n        </body>\n      </html>\n    "))}(e,(function(e){t.send(e)}))}))}))}]);